<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" /> <!-- Character encoding for the webpage -->
<meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Required for Internet Explorer compatibility -->

<!-- Metadata for search engines -->
<title>Quiz | Quizzatopia - Explore a World of Quizzes</title>
<meta name="generator" content="Quizzatopia" /> 
	
<meta name="description" content=" Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation.">

	<meta itemprop="name" content="Quizzatopia">
<meta property="og:title" content="Quizzatopia - Explore a World of Quizzes">
<meta property="og:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="Distribution" content="Global" />
<meta name="Rating" content="General" />
<meta name="copyright" content="Quizzatopia">
<meta name="language" content="English">
<meta name="reply-to" content="quizzatopia@gmail.com">
<meta name="generator" content="Adobe Dreamweaver">
<meta name="Developer" content="Ron Wilson II">
<!-- Links to favicon images for various devices -->
<link rel="icon" sizes="192x192" href="/favicon.ico">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Alternate link to favicon image -->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> <!-- Required for mobile devices -->
<meta property="og:type" content="website">

	
<meta property="og:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="keywords" content="quizzing, quizzes, learning, education, fun, trivia, exam preparation, sign up, log in, compete, points, achievements">
<meta property="og:url" content="https://www.quizzatopia.com">

	
<meta name="robots" content="index,follow">
	<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Quizzatopia">
<meta name="twitter:title" content="Quizzatopia - Explore a World of Quizzes">
<meta name="twitter:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="twitter:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="twitter:url" content="https://www.quizzatopia.com">

<!-- Open Graph metadata for Facebook -->
<meta property="og:site_name" content="Quizzatopia">
<meta property="og:locale" content="en_US">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Schema.org markup for Google+ -->
<meta itemprop="description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta itemprop="image" content="https://www.quizzatopia.com/images/logo.png">


<!-- Canonical URL -->
<!-- <link rel="canonical" href="https://www.quizzatopia.com/quiz"> -->
 <link rel="canonical" href="https://www.quizzatopia.com/quiz/">

	
<!-- Author information -->
<meta name="author" content="Ron Wilson II">
<meta name="contact" content="quizzatopia@gmail.com">

<!-- Page-specific metadata -->
<meta name="subject" content="Quizzatopia Platform">
<meta name="topic" content="Quizzing, Education, Learning, Quizzes">
<meta name="geo.placename" content="Dallas, TX">
<meta name="geo.region" content="US-TX">

<!-- Language and content type -->
<meta name="content-language" content="en-US">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- Caching and expiration -->
<meta http-equiv="expires" content="Tue, 01 Jan 2024 00:00:00 GMT">
<!-- <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="pragma" content="no-cache"> -->
	

 <!-- Google AdSense code -->
 <!--  <script defer  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4968673576211489" crossorigin="anonymous"></script> -->

 <!-- Organization Schema -->
   <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Quizzatopia",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "url": "https://www.quizzatopia.com",
  "logo": "https://www.quizzatopia.com/images/logo.png",
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia/about",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
 </script>



    <!-- Blog Schema -->
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "Quizzatopia Blog",
        "description": "The official blog of Quizzatopia, providing additional quiz-related content and insights.",
        "url": "https://quizzatopia.blogspot.com"
    }
 </script>

  

	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Quizzatopia",
  "url": "https://www.quizzatopia.com",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.quizzatopia.com/quiz?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
</script>


	  
	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.quizzatopia.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Quizzes",
      "item": "https://www.quizzatopia.com/quizzes"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "About",
      "item": "https://www.quizzatopia.com/about"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Quiz",
      "item": "https://www.quizzatopia.com/quiz"
    }
  ]
}
</script>

	<style>
.btnMain {
    background-color: #fd7e14;
    color: #fff;
    border: none;
    padding: 2%;
    cursor: pointer;
    font-size: 1.2em;
    font-weight: 700;
	box-shadow: 0px 1px 0rem 2px rgba(0, 0, 0, 0.2) !important;
}



		
@keyframes blinkAnimation {
  0% {
    background-color: #eaeaea;
  }
  50% {
    background-color: #ffc107;
  }
  100% {
    background-color: #eaeaea;
  }
}

.blink{
  animation: blinkAnimation 1s infinite;
}



		
.game-button {
        display: inline-block;
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        text-decoration: none;
        font-family: "Arial", sans-serif;
        font-size: 18px;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
	    border: 1px solid #CED4DA;
    border-radius: 4px;
      }

      .game-button:hover {
        background-color: #45a049;
      }

      .share-link-container {
        display: flex;
        align-items: center;
      }

      .share-link-input {
        flex-grow: 1;
        padding: 10px;
        font-family: "Arial", sans-serif;
        font-size: 16px;
        border: none;
        border-radius: 4px;
	      margin-bottom: 0 !important;
      }

      .copy-button {
        margin-left: 10px;
      }
#quiz-options{
    background-color: #eaeaea;
    box-shadow: 0px 1px 0rem 1px rgba(0, 0, 0, 0.2) !important;
  width: 100%;
margin-bottom: 5% !important;

}

.font-weight-bold{
    display: inline-block;
    cursor: pointer;
    padding: 2%;
    margin-block-start: auto;
    border-radius: 2em;
    box-shadow: 0px 1px 0rem 1px rgba(0, 0, 0, 0.2) !important;
    color: #fd7e14;
    font-size: 1.2em;
    font-weight: 900;
}

		
		
.btnMainBottom {
display: inline-block;
    cursor: pointer;
    padding: 2%;
    margin-block-start: auto;
    background-color: #eaeaea;
    border-radius: 2em;
    box-shadow: 0px 1px 0rem 1px rgba(0, 0, 0, 0.2) !important;
    color: #fd7e14;
    font-size: 1.2em;
    font-weight: 900;
}


		
.popupMSG {
position: fixed;
    bottom: 0;
    left: 50%;
    min-width: 50%;
    transform: translate(-50%, -50%);
    background-color: #f9f9f9;
    padding: 10px;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    z-index: 9999;
	  display: none;

}

.popupMSG span {
  display: block;
  text-align: center;
}


		.rating {
  font-size: 30px;
}

.star {
  cursor: pointer;
  color: #ccc;
}

.star.active {
  color: #ffd700;
}

#quizRating {
    font-weight: 500;
    padding: 10px 20px;
    font-size: 20px;

}
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.6);
}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 400px;
  max-width: 90%;
}

.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.close:hover,
.close:focus {
  color: #333;
  text-decoration: none;
  cursor: pointer;
}

#reviewTextArea {
  width: 100%;
  height: 150px;
  margin-bottom: 10px;
  resize: none;
}

#submitReviewBtn {
  background-color: #4caf50;
  border: none;
  color: white;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}
.bar{
  width: 100%;
  padding: 5%;
	display:block;

}
#reportFormBTN{
  background-color: #ef6a6a;
  border: none;
  color: white;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
	display: block;
}




#question {
    padding: 4%  !important; 
}

#optionContainers {
    padding: 4%  !important;

}

#optionContainersXX {
     background-color: #f7ede1;
    border-radius: 2em;
    padding: 4%  !important;
    box-shadow: 0px 1px 0rem 2px rgba(0, 0, 0, 0.2) !important;
}

	#readButton {
    display: inline-block;
    cursor: pointer;
    padding: 10px;
    background-color: #eaeaea;
    border-radius: 5px;
        box-shadow: 0px 1px 0rem 1px rgba(0, 0, 0, 0.2) !important;
    color: #fd7e14;
    font-size: 1.2em;
    font-weight: 900;
		padding: 0 4% 0 4%;
}	

#readButton img {
  width: 24px;
  height: 24px;
  vertical-align: middle;
  margin-right: 5px;
}

#readButton span {
  font-size: 1.2em;
  vertical-align: middle;
color: #fd7e14;
}
		
#question-number {
display: inline-block;
    cursor: pointer;
    padding: 2%;
    margin-block-start: auto;
    background-color: #eaeaea;
    border-radius: 2em;
    box-shadow: 0px 1px 0rem 1px rgba(0, 0, 0, 0.2) !important;
    color: #fd7e14;
    font-size: 1.2em;
    font-weight: 900;
}


		#reviewPopup{
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.6);
		}

		#reviewPopupBox{
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 400px;
  max-width: 90%;
		}

#statsPopup{
	  display: none;

}

		

		#questionPopup{
    display: none;



		}
.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
	    z-index: 999999;
}

.popup-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;

	    height: 90%;


		    background-color: #e7e7e7;
    padding: 5%;
    border-radius: 2em;
    margin: auto;
  overflow: hidden;

    box-shadow: inset 0px 1px 0rem 14px #fd7e14 !important;

}
.scroll {
    overflow-y: scroll;
    display: block;
    height: fit-content;
    margin-top: 5%;

}
.tab {
  display: flex;
  justify-content: center;
}

.tab-link {
  margin-right: 10px;
  padding: 8px 12px;
  border: none;
  background-color: #ccc;
  cursor: pointer;
}

.tab-link.active {
  background-color: #555;
  color: #fff;
}

.tab-cont {
  display: none;
  margin-top: 20px;
}

.tab-cont.active {
display: block !important;
}

#optionsPopup{
  display: none;

}
  
</style>
	  	
	
	
	
  <!-- Chart.js library   background-color: yellow; -->
  <script  src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">

  <!-- Custom CSS -->
 <!--  <link rel="stylesheet" href="/style.css">-->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="indexOptions.css?21">
  <link rel="stylesheet" href="popupsCSS.css">

  <!-- Import navbar and footer components -->
  <link rel="import" href="/elements/navbar.html">
  <link rel="import" href="/elements/footer.html">

  <div id="navbar"></div>
  <!-- Rest of the page content -->
  <div id="signupLoginArea"><div>

  <!-- JavaScript dependencies async -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"  crossorigin="anonymous">


  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>

  <script  defer src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
	  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js"></script>

  <!-- Firebase SDK -->
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

  <!-- Custom scripts -->
  <script  src="/main.js" defer></script> 
	  </head>
	  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9VG78SV9KZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9VG78SV9KZ');
	  
	//  console.log('page loading??/ mmmmm???????????????????????????????:');
	  
  </script>

  <!-- Google AdSense -->

	
<body>
	<main_section>
  <!-- Rest of the page content -->

  <div id="optionContainer" >
    <div class="row" style="padding: 2%;">
      <div class="col-md-6">
        <div class="quiz-options">
          <div class="form-check">
            <div id="optionsQuizNameWrap">
              <div id="optionsQuizName" class="text-center mb-4"><h1>Quiz Name</h1></div>
              <!-- Quiz Name -->
            </div>
          </div>
          <hr>





		

		
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="timer-checkbox">
            <label class="form-check-label" for="timer-checkbox">
              Enable Timer
            </label>
            <!-- Enable Timer Checkbox -->
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="countdown-per-question">
            <label class="form-check-label" for="countdown-per-question">
              Countdown per Question
            </label>
            <!-- Countdown per Question Checkbox -->
          </div>
          <div id="timer-timeGroup" class="form-group">
            <label for="quiz-time">Quiz Time:</label>
            <div class="input-group">
              <input type="number" id="quiz-time" name="quiz-time" value="30" class="form-control">
              <div class="input-group-append">
                <span class="input-group-text">Seconds</span>
              </div>
            </div>
            <!-- Quiz Time Input -->
          </div>

          <hr>

          <div id="testInfo" class="text-center mb-4"></div>
          <!-- Test Information Placeholder -->
          
          <p id="pie_graph_front" style="width: 50%; margin: auto;"></p>
          <!-- Pie graph -->

             <div class="text-center">
            <button id="start-btn" class=" " onclick="startQuiz()">Start Quiz</button><br>
            <!-- Start Quiz Button onclick="retakeButton()" -->
            <button id="retakeButton" class="btnMain    " >Retake</button>

		     
            <div class="quiz-image-container text-center">
              <img src="/images/lan/9.png" alt="quiz-image" class="w-100" loading="lazy">
              <!-- Quiz Image -->
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="quiz-image-container text-center">
          <img src="/images/lan/10.png" alt="quiz-image" class="w-100 d-md-block" loading="lazy">
          <!-- Quiz Image -->
        </div>






	      
	        <div class="container" style="padding: 2%;" loading="lazy">

	                    <h2 class="coach-name">Join the Discussion</h2>
		


<div id="discussionContainer" class="container" style="padding: 2%;" loading="lazy">
  <img src="https://www.quizzatopia.com/images/sq/43.png" alt="Main Discussion Picture" style="width: -webkit-fill-available;" loading="lazy">
  <p class="coach-description">A place where new members can introduce themselves, ask questions, and get acquainted with the Quizzatopia community.<br> <b>Join our community<b></b></b></p>
</div>

           
</div>
	      
</div></div></div>
	
	
  <div class="container mt-4 d-none" id="quiz-container">
    <!-- Quiz Container -->

        <div id="quiz-options" class="d-flex justify-content-between">
<div id="statsBTN" class="font-weight-bold" onclick="openPopupsFunc('statsPopup','');">Stats</div>
<div id="reviewBTN" class="font-weight-bold" onclick="openPopupsFunc('reviewPopup','');">Review</div>
<div id="optionsBTN" class="font-weight-bold" onclick="openPopupsFunc('optionsPopup','optionsPopupBox');">Options</div>
	</div>

	  
    <div   id="quizContainer" class="layer-1">
      <!-- First Layer -->
      <div class="layer-2" id="quiz_main_area">
        <!-- Second Layer: Main Quiz Area -->
        <div id="ad-container">
          <!-- Ad Container -->
          <div id="ad-box">
             
            <p>
		  
<a href="https://www.buymeacoffee.com/Quizzatopia" target="_blank"><img src="/images/bmc.png" alt="Buy Me A Coffee" id="adPic" ></a>

	
              
            </p>
            <div id='ad-view' style="min-width:255px">
              <span id='ad-text'></span>
              <!-- Google Ad Code -->
              <!-- <span class='ad-text'>This will be an ad</span> -->
            </div>
          </div>
        </div>

	      
	
	
        <div id="quiz-timer-qn" class="d-flex justify-content-between">
          <div id="question-number" class="font-weight-bold"   onclick="openOptions();"></div>
          <div id="timer" class="text-right"></div>
		
<div id="readButton" onclick="readQuizFunc();">
  <div>&#128264;</div>
  <span>Read</span>
</div>
		
        </div>

        <div class="progress-bar-container">
          <!-- Progress Bar Container -->
          <div class="progress-bar" id="progress-bar"></div>
          <!-- Progress Bar -->
        </div>

	      
	
        <h1 id="question"  onclick="readQuestionFunc();"></h1>
        <!-- Question heading -->
	      
	    <div id="questionImageArea" >
		    <img id="questionImage" src="/images/blank.png" alt="quiz image" loading="lazy">
	      </div>

	      
        <ul class="list-unstyled" id="optionContainers">
          <!-- Answer option containers -->
          <li><button id="option_1" class="btnMain  answer-option"></button></li>
          <li><button id="option_2"  class="btnMain   answer-option"></button></li>
          <li><button id="option_3"  class="btnMain   answer-option"></button></li>
          <li><button id="option_4"  class="btnMain  answer-option"></button></li>
        </ul>

	      
	


	
	
        <!-- Explanation area -->
        <div class="btn_container">
          <!-- Button container -->
          <div id="show-explanation-btn" class="btnMainBottom  d-none mt-3"  onclick="showExplanationFunc()">Show Explanation</div>
          <div id="skip-next-btn" class="btnMainBottom   mt-3"  onclick="skipOrNext()">Skip</div>
        </div>
      </div>
    </div>
  </div>

		
	
		




		
  <div class="container mt-4 d-none" id="end-container">
    <!-- End Container -->
    <h2 id="result-text"></h2>
    <!-- Result Text -->
    <h2 class="mt-4">Your Final Score</h2>
    <!-- Final Score Heading -->
    <p id="score"></p>
    <!-- Score Placeholder -->
    <p id="feedback"></p>
    <!-- Feedback Placeholder -->
    <p><span id="earnedPoints"></span></p>
    <p>
      <div class="d-none" id="badgebox">
        <span>Awards</span>
        <div id="badgeView"></div>
      </div>
    </p>
      <!-- Feedback Section -->
    <label id="quizRating" for="rating">Quiz Rating:</label>
    <div id="ratingStars" class="rating">
  <span class="star" onclick="rateQuiz(1)">&#9734;</span>
  <span class="star" onclick="rateQuiz(2)">&#9734;</span>
  <span class="star" onclick="rateQuiz(3)">&#9734;</span>
  <span class="star" onclick="rateQuiz(4)">&#9734;</span>
  <span class="star" onclick="rateQuiz(5)">&#9734;</span>
</div>
<button id="leaveReviewBtn" class="other-quiz-btn  btn-secondary mt-4">Leave Review</button>
	  
    <button id="retake-btn" class="other-quiz-btn  btnMain mt-4 "  onclick="retakeQuizFunc()">Retake Quiz</button>
    <!-- Retake Quiz Button -->
    <button class="other-quiz-btn  btn-secondary mt-4" onclick="window.location.href = '/quizzes'">Try Another Quiz</button><br><hr>
    <!-- Try Another Quiz Button -->

 <div class="share-link-container">
      <input
        type="text"
        id="shareLink"
        class="share-link-input"
        value="https://example.com/share"
        readonly
      />
      <button class="btnMain  game-button copy-button " onclick="copyLink()">Copy</button>
    </div>
	  
    <div id="social-sharing" class="mt-4">
      <!-- Social Sharing Section -->
      <p>
        <a id="social_fb" href="" target="_blank" class="btn btn-social btn-facebook btn-primary"><i class="fab fa-facebook-f"></i> Share on Facebook</a>
        <!-- Share on Facebook Button -->
        <a id="social_tw" href="" target="_blank" class="btn btn-social btn-twitter btn-info"><i class="fab fa-twitter"></i> Share on Twitter</a>
        <!-- Share on Twitter Button -->
      </p>
      <p>
        <a id="social_red" href="" target="_blank" class="btn btn-social btn-reddit btn-danger"><i class="fab fa-reddit"></i> Share on Reddit</a>
        <!-- Share on Reddit Button -->
        <a id="social_ln" href="" target="_blank" class="btn btn-social btn-linkedin btn-primary" style="margin-right: 10px;"><i class="fab fa-linkedin"></i> Share on LinkedIn</a>
        <!-- Share on LinkedIn Button -->
      </p>
    </div>
				
	
		
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="Quizzatopia" data-color="#5F7FFF" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#ffffff" data-coffee-color="#FFDD00"></script>
  </div>
</main_section>

	 
	</main_section>



<div id="reviewModal" class="modal">
  <div class="modal-content">
    <span id="closeModal" class="close">&times;</span>
	  <p>
<button class="  btnMain py-2 px-4" onclick="quickFeedback('Great Experience')">Great Experience</button>
<button class="  btnMain py-2 px-4" onclick="quickFeedback('User-Friendly Interface')">User-Friendly Interface</button>
<button class="  btnMain py-2 px-4" onclick="quickFeedback('Buggy')">Buggy</button>
<button class=" btnMain py-2 px-4" onclick="quickFeedback('Informative Content')">Informative Content</button>

		  
	  </p>
    <h2>Leave a Review</h2>
    <textarea id="reviewTextArea" placeholder="Enter your review or feedback"></textarea>
    <button id="submitReviewBtn" class=" btnMain" >Submit</button>
  </div>
</div>




  <div class="explanation-container  PopupWrap">
  <div id="explanation-con" class="explanation">
	  <div id="explanation_bar"><div id="difficulty"></div>    <div id="realQustionNum"></div>

 <div></div> <div id="reportFormBTN" class="btnMain" onclick=" closeExplanationPopup(); openReport();" >Report</div>
   
	  </div>
  <div class="center"><h3>Explanation</h3></div>
	  <hr>
	      <div id="explanation" onclick="readExplanationFunc()"></div>

	   <button id="close-btn" class="BottomCloseOptionsButton">Close</button>
  </div>
  </div>






	
	<div id="popupMSG" class="popupMSG">
  <span id="popupMessage"></span>
</div>

	
					
	<div id="reportForm" class="PopupWrap">
  <div id="reportContainer" class="optionspopup">
    <div class="form-group" id="reportView">
      <span onclick="closeReport()" class="close">&times;</span>
      <h3>What is the problem?</h3>
      <div class="quickReport">
        <button class=" btn-main py-2 px-4" onclick="submitReport('Glitch Detected', 'reportForm');">Glitch Detected</button>
        <button class=" btn-main py-2 px-4" onclick="submitReport('Quiz Malfunction', 'reportForm');">Quiz Malfunction</button>
        <button class=" btn-main py-2 px-4" onclick="submitReport('Technical Troubles', 'reportForm');">Technical Troubles</button>
        <button class=" btn-main py-2 px-4" onclick="submitReport('Bug Alert', 'reportForm');">Bug Alert</button>
      </div>

      <div class="form-group">
        <label for="reportDetails">Details</label>
        <textarea class="form-control" id="reportDetails" rows="4" required></textarea>
      </div>
      <hr>
      <button id="reportFormBTN" class=" btn-main btn-block" onclick="submitReport('submit', 'reportForm');">Submit Report</button>
    </div>
  </div>
</div>

	
		

	  
	
	
	
  <div id="otherQuizzes" class="container">

  </div>







	
	
	<div id="statsPopup" class="PopupWrap ">
  <!-- Options content goes here -->
		<div id="optionsPopupBox" class="optionspopup">
		<div  class="scrollWrap">
<div id="quizInfoPopup">
  <h3>Quiz Stats</h3>

	<div class="center block"><p>Quiz Code: <span id="quizCodePopup"></span></p>
  <p>Quiz Name:  <span id="quizName"></span></p></div>
<hr>

<div class=" block">
  <p>Number of Questions: <span id="totalQuestions"></span></p>
  <p>Questons Completed: <span id="questionsCompleted"></span></p>
  <p>Percet Completed: <span id="percetCopleted"></span></p>
</div>
	
 <div class="center block">
	 <p>Score Percent: <span id="scorePercent"></span></p>
  <p>Score: <span id="bestScore"></span></p>
</div>

<div class=" block">
  <p>Question Correct: <span id="questionCorrect"></span></p>
  <p>Question Incorrect: <span id="questionIncorrect"></span></p>
</div>
	
<div class="center block">	 
  <p>Time so far: <span id="timeSoFar"></span></p>
  <p>Quiz URL: <span id="quizURL"></span></p>
</div>

	
</div>



	
</div>
  <button id="closeStatsButton " class="close BottomCloseOptionsButton"  onclick="closeStatsPopup()" >Close</button>

</div>
	
</div>


















	<div id="optionsPopup" class="PopupWrap ">
  <!-- Options content goes here -->
		<div id="optionsPopupBox" class="optionspopup">
		<div  class="scrollWrap">
<div id="quizInfoPopup">


<div id="optionsMenu">
  <h3>Options</h3>

<div class=" block">
  <div class="form-check ">
    <label for="audioButton">Audio:</label>
    <button id="audioButton">On</button>
  </div>
</div>

<div class=" block">
  <div class="form-check">
    <label for="volumeSlider">Speech Volume:</label>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.2">
  </div>

  <div class="form-check">
    <label for="voiceDropdown">Voice:</label>
    <select id="voiceDropdown"></select>
  </div>

  <div class="form-check">
    <label for="rateSlider">Speech Rate:</label>
    <input type="range" id="rateSlider" min="0.1" max="2" step="0.2">
  </div>
</div>

<div class=" block">
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="animation-quiz">
    <label class="form-check-label" for="animation-quiz">
      Animate Quiz
    </label>
  </div>
</div>
</div>

	
</div>
  <button id="closeOptionsButton " class="close BottomCloseOptionsButton"  onclick="closeOptions()" >Close</button>

</div>
	
</div>


	


<div id="reviewPopup" class="popup">
  <div class="popup-content">
	  <div class="scroll" >
    <div class="tab">
		    <h2 id="quizReviewName"></h2>
    </div>

		  <hr>
<div id="correctTab" class="tab-content">
  <h3>Correct Answers</h3>
  <div id="correctList"></div>
</div>
<br>
<div id="incorrectTab" class="tab-content">
  <h3>Incorrect Answers</h3>
  <div id="incorrectList"></div>
</div>
</div>

    <button id="closeReviewButton " class="BottomCloseOptionsButton"  onclick="closeReviewPopup()" >Close</button>
  </div>
</div>


 
<div id="questionPopup" class="popup">
  <div class="popup-content">
    <h3>Question</h3>
    <div id="content-wrap">
      <div id="questionTextArea" class="text-area"></div>
      <h3>Answer</h3>
      <div id="answerTextArea" class="text-area"></div>
      <h3>Explanation</h3>
      <div id="explanationTextArea" class="text-area"></div>
      <h3>Response</h3>
      <div id="responseTimeTextArea" class="text-area"></div>
    </div>
    <span class="close BottomCloseOptionsButton" onclick="closeQuestionPopup()">Close</span>
  </div>
</div>

	

	
  <script>

function loadQuestionsCompleted(quizCode) {
  const quizInfoStored = localStorage.getItem(`quizInfo_${quizCode}`);
  const quizInfo = quizInfoStored ? JSON.parse(quizInfoStored) : {};
  const questionsCompleted = quizInfo.questionsCompleted || [];
  return questionsCompleted;
}

	//console.log("questionsCompleted...."+quizInfo.questionsCompleted);

	  
// Open the question popup
function openQuestionPopup(questionIndex, count) {
  const question = questions[questionIndex];
  const questionTextArea = document.getElementById("questionTextArea");
  const answerTextArea = document.getElementById("answerTextArea");
  const explanationTextArea = document.getElementById("explanationTextArea");
  const responseTimeTextArea = document.getElementById("responseTimeTextArea");
  
  questionTextArea.innerHTML = question.question;
  answerTextArea.innerHTML = question.answer;
  explanationTextArea.innerHTML = question.explanation;
	
let questionsCompleted = loadQuestionsCompleted(quizCode);

console.log("questionsCompleted:", questionsCompleted);
console.log("questionIndex:", questionIndex);

// Access the responseTime of a specific question
//let questionIndex = 0; // Replace with the desired question index
let responseTime = questionsCompleted[count].responseTime;

//console.log("responseTime:", responseTime);


let minutes = Math.floor(responseTime / 60000); // Convert milliseconds to minutes
let seconds = Math.floor((responseTime % 60000) / 1000); // Convert remaining milliseconds to seconds

// Display the timeElapsed in minutes and seconds format
 responseTimeTextArea.innerHTML  = `${minutes} mins ${seconds} secs`;
				    
  
  const popup = document.getElementById("questionPopup");
  popup.style.display = "block";



	
}

function zoomOutTransition(elementId) {
  const element = document.getElementById(elementId);
  element.style.transition = "transform 0.3s ease";
  element.style.transform = "scale(0)";
  
  setTimeout(() => {
    element.style.display = "none";
  element.style.transition = "initial";
  element.style.transform = "initial";
	  
  }, 300);
}

// Usage example


function openPopupsFunc(xxx, zzz) {

			  slideIn(zzz);

  document.getElementById(xxx).style.display = "block";

}



	  

// Close the question popup
function closeQuestionPopup() {

	
	zoomOutTransition("questionPopup");
//  document.getElementById("questionPopup").style.display = "none";

}

function closeStatsPopup(){
	zoomOutTransition("statsPopup");
//  document.getElementById("reviewPopup").style.display = "none";

}
	


function closeReviewPopup(){
	zoomOutTransition("reviewPopup");
//  document.getElementById("reviewPopup").style.display = "none";

}
	  


//questionsCompleted  = quizInfo.questionsCompleted;
// Open the review popup
document.getElementById("openReviewButton").addEventListener("click", function() {
  document.getElementById("reviewPopup").style.display = "block";


	
	

	
var correctTab = document.getElementById("correctTab");
var incorrectTab = document.getElementById("incorrectTab");
incorrectTab.innerHTML = "<h3>Incorrect Answers</h3><div id='incorrectList'></div>";
correctTab.innerHTML = "<h3>Correct Answers</h3><div id='correctList'></div>";
	

	document.getElementById("quizReviewName").innerHTML = quizInfo.quizName;

	 
var addedQuestionNumbers = []; // Array to store the added question numbers
let count = 0
questionsCompleted.forEach(function(question) {
//  var questionIndex = question.questionNumber - 1; // Adjust index by subtracting 1
  var questionIndex = question.questionNumber; // Adjust index by subtracting 1
count++;	count = count - 1;
   console.log("1 addedQuestionNumbers " + addedQuestionNumbers);

  // Check if the question number has already been added
if (addedQuestionNumbers.indexOf(questionIndex) > -1) {
  return; // Skip this iteration if the  question number already exists
}

  addedQuestionNumbers.push(questionIndex); // Add the question number to the array
	
  // console.log(questionIndex+" addedQuestionNumbers " + addedQuestionNumbers);
	
  if (questionIndex >= 0 && questionIndex < questions.length) {
    var questionDiv = document.createElement("div");
    questionDiv.classList.add("quiz-result-item");
    
    if (question.correctness === "correct") {
      questionDiv.classList.add("correct");
    } else if (question.correctness === "incorrect") {
      questionDiv.classList.add("incorrect");
    }
    
    questionDiv.addEventListener("click", function() {
      // Handle click event for each question
	    openQuestionPopup(questionIndex, count);
   //   console.log("Question " + (questionIndex + 1) + " Answer: " + questions[questionIndex].answer + " Explanation " + questions[questionIndex].explanation);
    });
	
let questionsCompleted = loadQuestionsCompleted(quizCode);



//console.log("questionsCompleted:", questionsCompleted);
console.log("count:", count);

// Access the responseTime of a specific question
//let questionIndex = 0; // Replace with the desired question index
let responseTime = questionsCompleted[count].responseTime;

console.log("responseTime:", responseTime);


let minutes = Math.floor(responseTime / 60000); // Convert milliseconds to minutes
let seconds = Math.floor((responseTime % 60000) / 1000); // Convert remaining milliseconds to seconds

// Display the timeElapsed in minutes and seconds format
 let responseTimeText = `${minutes} mins ${seconds} secs`;
	 
    let reviewQuestionNumber = document.createElement("span");
    reviewQuestionNumber.classList.add("question-number");
    reviewQuestionNumber.innerHTML = "<b>Question:</b> " + (questionIndex + 1) + "  <b>Response Time:</b> "+responseTimeText;
  //  questionNumber.textContent = "Question " + (questionIndex) + ": ";
	  
    let reviewQuestionResponse = document.createElement("br");


    let reviewQuestionText = document.createElement("span");
    reviewQuestionText.classList.add("question-text");
    reviewQuestionText.textContent = questions[questionIndex].question ;
/*
    let reviewQuestionResponse = document.createElement("span");
    reviewQuestionResponse.classList.add("question-text");
    reviewQuestionResponse.textContent = questions[questionIndex].responseTime;

*/
	  
          console.log(questions[questionIndex].question);


	      questionDiv.appendChild(reviewQuestionNumber);

        questionDiv.appendChild(reviewQuestionResponse);
    questionDiv.appendChild(reviewQuestionText);

if (question.correctness === "correct") {
  const parentElement = document.getElementById("correctList");
  const firstChild = parentElement.firstChild;
  parentElement.insertBefore(questionDiv, firstChild);
} else if (question.correctness === "incorrect") {
  const parentElement = document.getElementById("incorrectList");
  const firstChild = parentElement.firstChild;
  parentElement.insertBefore(questionDiv, firstChild);
}

  }
});



});
	  








	  


// Get the retake button element
const retakeButton = document.getElementById("retakeButton");

// Attach an event listener to the retake button
retakeButton.addEventListener("click", function() {
  // Retrieve the wrong questions from questionsCompleted
  const wrongQuestions = questionsCompleted.filter(question => question.correctness === "incorrect");

  // Create a new quiz or quiz session with the wrong questions
  createQuizSession(wrongQuestions);
});

	  function createQuizSession(wrongQuestions){

		  questions = wrongQuestions;
startQuiz();

	  }





		  

	   var volumeSlider = document.getElementById('volumeSlider');
 var voiceDropdown = document.getElementById('voiceDropdown');
 var rateSlider = document.getElementById('rateSlider');
var animationCheckbox = document.getElementById('animation-quiz');
var quizCodeElement = document.getElementById('quizCodePopup');
	  
const questionsCompletedElement = document.getElementById('questionsCompleted');
const totalQuestionsElement = document.getElementById('totalQuestions');
const questionCorrectElement = document.getElementById('questionCorrect');
const questionIncorrectElement = document.getElementById('questionIncorrect');
const timeSoFarElement = document.getElementById('timeSoFar');
const scorePercentegeElement = document.getElementById('scorePercent');
const percetCopletedElement = document.getElementById('percetCopleted');
const quizURLElement = document.getElementById('quizURL');
const quizNameElement = document.getElementById('quizName');


	  window.addEventListener("load", function() {


		  
// Event listeners and functions for the options menu
audioButton.addEventListener('click', toggleAudio);

volumeSlider.addEventListener('input', updateVolume);

voiceDropdown.addEventListener('change', updateVoice);

rateSlider.addEventListener('input', updateRate);

animationCheckbox.addEventListener('change', toggleAnimation);

	  });

// Function to update the volume
function updateVolume() {
  const volume = parseFloat(volumeSlider.value);
  // Update the volume value
  // Your logic for handling the volume change goes here
  utterance.volume = volume;

  // Output the current volume to the console
  console.log('Current volume:', utterance.volume);

  // Save the volume value to local storage
saveSettings('volume', volume);

}

// Function to update the voice
function updateVoice() {
  const selectedVoice = voiceDropdown.value;
  // Update the voice selection
  // Your logic for handling the voice change goes here
	getMatchingVoice(selectedVoice);
}

// Function to update the speech rate
function updateRate() {
  // Update the speech rate value
  // Your logic for handling the rate change goes here
  voiceSettings = {
    rate: parseFloat(rateSlider.value),
    voice: voiceDropdown.value
  };
  
saveSettings('voiceSettings', voiceSettings);
}

// Function to toggle the animation
function toggleAnimation() {
  const isAnimated = animationCheckbox.checked;
  // Toggle the animation state
  // Your logic for handling the animation toggle goes here

  userInfo.animationEnabled = isAnimated;
isAnimationEnabled = userInfo.animationEnabled;
  localStorage.setItem('userInfo', JSON.stringify(userInfo));
	saveSettings('animationEnabled', isAnimated);

}


	  
const optionsPopup = document.getElementById('optionsPopup');

function openOptions() {
	console.log("Load and Save ....");
	  clearTimeout(timeoutId);

const userInfoStored = localStorage.getItem(`userInfo`);
  const userInfo = storedUserInfo ? JSON.parse(userInfoStored) : {};
	animationCheckbox.checked = userInfo.animationEnabled;

 console.log("userInfo .... "+userInfo.firebaseId);
const quizInfoStored = localStorage.getItem(`quizInfo_${quizCode}`);
 quizInfo = quizInfoStored ? JSON.parse(quizInfoStored) : {};

// Update the quiz information
quizCodeElement.textContent = quizInfo.quizCode || "";
timeSoFarElement.textContent = quizInfo.quizTime || "";
quizURLElement.textContent = quizInfo.quizLink || "";
quizNameElement.textContent = quizInfo.quizName || "";



questionsCompletedElement.textContent = quizInfo.questionsCompleted.length || 0;


	
let qCorrect = quizInfo.questionCorrect || 0;
let qIncorrect = quizInfo.questionIncorrect || 0;

let qCompleted = qCorrect + qIncorrect;


let totalQuestions = quizInfo.numberOfQuestions || 0;

questionCorrectElement.textContent = qCorrect || 0;
questionIncorrectElement.textContent = qIncorrect || 0;
totalQuestionsElement.textContent = totalQuestions || 0;

let percentCompleted = (qCompleted / totalQuestions) * 100;
let scorePercentage = (qCorrect / (qCorrect + qIncorrect)) * 100;

percetCopletedElement.textContent = percentCompleted ? percentCompleted.toFixed(1) + "%" : "0%";
scorePercentegeElement.textContent = scorePercentage ? scorePercentage.toFixed(1) + "%" : "0%";


let currentTime = new Date();
let savedTime = new Date(quizInfo.startTime);

let timeElapsed = currentTime - savedTime;
let minutes = Math.floor(timeElapsed / 60000); // Convert milliseconds to minutes
let seconds = Math.floor((timeElapsed % 60000) / 1000); // Convert remaining milliseconds to seconds

// Display the timeElapsed in minutes and seconds format
timeSoFarElement.textContent = `${minutes} mins ${seconds} secs`;


		  slideIn("optionsPopupBox");
  document.getElementById("optionsPopup").style.display = "block";

//  optionsPopup.classList.remove('d-none');
}












function closeOptions(){
		  slideOut("optionsPopupBox");
	zoomOutTransition("optionsPopup");

//  optionsPopup.classList.add('d-none');
}


	  
function fetchQuizzesFromDB() {
  console.log("Fetching quizzes from the database...");
// Initialize your Firebase app
	

 const db = firebase.firestore();

	
  // Fetch the quizzes collection
  db.collection('quizzes')
 .limit(20)
    .get()
    .then((querySnapshot) => {
    const documents = querySnapshot.docs;
    const randomDocuments = [];
    const limit = 20;

    // Randomly select documents
    while (randomDocuments.length < limit && documents.length > 0) {
      const randomIndex = Math.floor(Math.random() * documents.length);
      const randomDocument = documents.splice(randomIndex, 1)[0];
      randomDocuments.push(randomDocument);
    }
      // Get the reference to the HTML container
      const quizContainer = document.getElementById('otherQuizzes');

      // Initialize the HTML string
      let html = '<h3>Other Quizzes</h3><hr><div class="otherQuizzes-column"><ul>';

      // Iterate over each quiz document
      querySnapshot.forEach((doc) => {
        const quizData = doc.data();

        // Generate the HTML for each quiz
        const quizHtml = `
          <li>
            <a href="${quizData.quizLinkDB}">
              ${quizData.quizNameDB}
            </a>
          </li>
        `;

        // Append the quiz HTML to the overall HTML string
        html += quizHtml;
      });

      // Close the unordered list and the column div
      html += '</ul></div>';

      // Update the quizContainer with the generated HTML
      quizContainer.innerHTML = html;

      console.log("Quizzes fetched and HTML updated successfully.");
    })
    .catch((error) => {
      console.error("Error fetching quizzes:", error);
    });
}
window.addEventListener("load", function() {

// Call the function to fetch and populate the quiz data
 fetchQuizzesFromDB();

	

});

	  
const element = document.getElementById("discussionContainer");
element.addEventListener("click", function() {
  window.open("https://www.quizzatopia.com/community/", "_blank");
});

	  
window.addEventListener("load", function() {


	// Check if user is logged in
  if (loggedIn   ==  false) {
		const timerId = setTimeout(() => {
		 // Show the login popup
openPopup();	
}, 5000); // Timer will execute after 5000 milliseconds (5 seconds)
	  
  }
			  	    //  console.log("loggedIn 2.... "+loggedIn);

});
	</script>
	
	
	
	
  <script>
    
	
	  
    function  showPieChartFront(Correctpie,Incorrectpie){
 let Correct1 = parseInt(Correctpie);
 let Incorrect1 = parseInt(Incorrectpie);

   const chartCanvas1 = document.createElement('canvas');
chartCanvas1.id = 'pie-chart_1';
   
 
   
   // Create the data for the pie chart
 let pieData1 = {
  labels: ['Correct', 'Incorrect'],
  datasets: [{
    data: [Correct1, Incorrect1],
    backgroundColor: ['#36a2eb', '#ff6384']
  }]
};
   // Append the canvas to the chart container
const chartContainer1 = document.getElementById('pie_graph_front');
chartContainer1.appendChild(chartCanvas1);
	    
   /// console.log(Correct1+" showPieChartFront info     "+ Incorrect1); 
  
  // Get the 2D context of the canvas
const ctx = chartCanvas1.getContext('2d');



// Configure the options for the pie chart
const options1 = {
  responsive: true
};

// Create the pie chart using Chart.js
new Chart(ctx, {
  type: 'pie',
  data: pieData1,
  options: options1
});
  
 
}
	  
	  
	  
	  
	  
function calculateScore(quizInfo) {
  const totalQuestions = quizInfo.numberOfQuestions || 0;
  const correctAnswers = quizInfo.questionCorrect || 0;

  const score = correctAnswers;
  const percentage = totalQuestions > 0 ? (correctAnswers / totalQuestions) * 100 : 0;

  return {
    score,
    percentage,
  };
}

	  
	function saveQuizInfo(quizCode, quizInfo, q) {
//  console.log('???????????????????????????saveQuizInfo???????????????????????????????????????????????//');
if(quizStarted == true){
  const savedQuizInfo = JSON.parse(localStorage.getItem(`quizInfo_${quizCode}`)) || {};
  const savedScore = savedQuizInfo.questionCorrect || 0;
  const newScore = quizInfo.questionCorrect || 0;

 // console.log(savedScore + " savedScore | newScore " + newScore);

//  console.log(JSON.stringify(savedQuizInfo)'  saveQuizInfo Quiz quizInfo:  ' + quizInfo);
  //console.log('saveQuizInfo Quiz Code:' + quizCode);
 // console.log('saveQuizInfo Quiz Info:' + savedQuizInfo);
  //console.log('JSON.stringify(savedQuizInfo)) Quiz Info:' + JSON.stringify(savedQuizInfo));
/*
  if (newScore > savedScore || savedScore === 0 || savedScore === null) {
    savedQuizInfo.quizCode = quizCode;
    savedQuizInfo.questionCorrect = newScore; // Update the questionCorrect value
    savedQuizInfo.quizLink = q; // Add the "q" parameter to the quizInfo object
	  }else{
    savedQuizInfo.quizCode = quizCode;
    savedQuizInfo.questionsCompleted = questionsCompleted;
    savedQuizInfo.questionIncorrect = questionIncorrect;
  }*/
 if (newScore > savedScore ){
	  	  updatePoints(pointsRewards);
 }

	
	  //  savedQuizInfo = quizInfo;
 //   quizInfo = JSON.parse(quizInfo);

	 ///  console.log('saveQuizInfo Quiz Info:' + quizInfo);
	   console.log(quizCode+'  saveQuizInfo Quiz Info:' + quizInfo);
	
    // Update the quiz information for the specific quiz code
  localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(quizInfo));

}
}


  // Call the saveQuizInfo function with the "q" parameter
//saveQuizInfo(quizCode, quizInfo, q);

	  
	  
	  
	  
	  
// Log the contents of the storage
function logStorageContents(quizCode) {
  const savedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
//  console.log('logStorageContents Quiz Code:', quizCode);
  //console.log('logStorageContents Quiz Info:', savedQuizInfo);
}


	  
	  
		  
	  
	  
	  
	  
	  
var quizLinkURL = '';

var  quizType = '';	  
    
// Get the current URL and parse its search parameters
const urlParams = new URLSearchParams(window.location.search);
	//  console.log("1 urlParams     "+urlParams); 
quizLinkURL = 	"/quiz/?"+urlParams;
	  
// Find the <link rel="canonical"> element
var canonicalLink = document.querySelector('link[rel="canonical"]');

// Update the href attribute of the <link rel="canonical"> tag
canonicalLink.href = "https://www.quizzatopia.com"+quizLinkURL;


	  
// Get the values of the "q" and "e" parameters
var q = urlParams.get('q');
var e = urlParams.get('e');
	  
console.log("E urlParams     "+e); 
	  
	  
if (q === null) {
  const files = [
    "job_interviews",
    "marvel_cinematic_universe",
    "middle_school_math",
    "high_school_science",
    "movies",
    "hip_hop",
    "pop_culture"
  ];
//console.log("1 random     "+q);
	
	  function getRandomFile(files) {
    return files[Math.floor(Math.random() * files.length)];
  }

  q = getRandomFile(files);
}
  
	  
	  
	  let str = q;



var descriptionLink = document.querySelector('meta[name="description"]');
descriptionLink.setAttribute("content", "Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. "+q);



	

    //  var newStr = q.replace(/_/g, " ");
	  
	  
	  

	  
//document.getElementById("msg_quiz_name").innerHTML = newStr;
//document.getElementById("optionsQuizName").innerHTML = newStr;
	  
document.getElementById("social_fb").href = "https://www.facebook.com/sharer/sharer.php?u=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_tw").href = "https://twitter.com/intent/tweet?url=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_ln").href = "ttps://www.linkedin.com/shareArticle?url=https://quizzatopia.com/quiz/?q="+q;
document.getElementById("social_red").href = "https://www.reddit.com/submit?url=https://quizzatopia.com/quiz/?q="+q;
    
	  
	  
	  
  
	  
	  
	  
	  

	  function removeTF(q) {

// Use the value of "q"
//console.log("urlParams 875:    "+q); 

if (str.startsWith("TF")) {
 q = str.substr(2); // Remove the first three characters
	return q;
}
	  
	  
	  }
	  
	

	  
async function saveQuizToDB(quiz) {
  const { quizCodeX, quizNameX, imageURLX, quizJsonX, numberOfQuestionsX, quizLinkX, quizDifficultyX } = quiz;

  const db = firebase.firestore();

  // Check if quiz already exists in Firestore
  const querySnapshot = await db.collection('quizzes').where('quizCodeDB', '==', quizCodeX).get();

  if (!querySnapshot.empty) {
    showPopup(`Quiz with code ${quizCodeX} already saved.`);
  } else {
    // Set quizDifficulty to an empty string if it is undefined
    const difficulty2 = typeof quizDifficultyX !== 'undefined' ? quizDifficultyX : '';

    // Check if required fields have valid values
    if (
      typeof quizCodeX !== 'undefined' &&
      typeof quizNameX !== 'undefined' &&
      typeof imageURLX !== 'undefined' &&
      typeof numberOfQuestionsX !== 'undefined' &&
      typeof quizLinkX !== 'undefined'
    ) {
      // Save quiz information to Firestore with an automatically generated document ID
      await db.collection('quizzes').add({
        quizCodeDB: quizCodeX,
        quizNameDB: quizNameX,
        imageURLDB: imageURLX,
        quizJsonDB: quizJsonX,	      
        numberOfQuestionsDB: numberOfQuestionsX,
        quizLinkDB: quizLinkX,
        quizDifficultyDB: difficulty2,
	    quizStartedCount: 0 // Initialize the quizStartedCount to 0

      });
	      
      showPopup(`Quiz with code ${quizCodeX} saved successfully.`);
    } else {
      showPopup('Invalid quiz data. Please provide all required fields.');
    }
  }
}


function showPopup(message) {
  const popup = document.getElementById('popupMSG');
  const popupMessage = document.getElementById('popupMessage');
  popupMessage.textContent = message;
  popup.style.display = 'block';

  setTimeout(() => {
    popup.style.display = 'none';
  }, 3000); // Hide the popup after 3 seconds
}

	  
	  
	  
	  

	  
	  
	  
	  
	  
	  
	  
	  
	  
	  

	  
 
let questions = [];
let quizCode;
let quizName;
let numberOfQuestions;
let quizImageURL;
let quizDifficulty;
let questionNumber;
let questionType;

let difficulty;
let imageURL;
	  
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
	  
	  

	  

// Retrieve the stored test information and display it
function displayTestInfo(quizCodeNS, quizNameNS, numberOfQuestionsNS, quizImageURL_NS, quizDifficultyNS) {
  const storedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
  if (storedQuizInfo) {
    try {
      const quizInfo = JSON.parse(storedQuizInfo);
      const testInfoDiv = document.getElementById('testInfo');

      // Calculate user score and completion percentage
      const { score, percentage } = calculateScore(quizInfo);
      let ansWrong = numberOfQuestions - score;

	    if(score > 0){
      // Show the pie chart for correct and incorrect answers
      showPieChartFront(score, ansWrong);
	    }
      testInfoDiv.innerHTML = `
        <h3>Quiz Information</h3>
        <p><strong>Quiz Code:</strong> ${quizInfo.quizCode}</p>
        <p><strong>Quiz Type:</strong> ${quizType || 'N/A'}</p>
      <p><strong>Quiz Difficulty:</strong> ${quizDifficultyNS || 'N/A'}</p>
        <p><strong>Number of Questions:</strong> ${quizInfo.numberOfQuestions}</p>
        <p><strong>Question Correct:</strong> ${score}</p>
        <p><strong>Best Score:</strong> ${percentage.toFixed(0)}%</p>
      `;
	    
	    	// Update the title tag
document.title = `${quizNameNS}`;
  
	      const optionsQuizNameDiv = document.getElementById('optionsQuizName');
    optionsQuizNameDiv.innerHTML = `<h1>${quizNameNS}<h1>`;
	    
      logStorageContents(quizInfo.quizCode);

    } catch (error) {
      console.error('Error parsing stored quiz info:', error);
      // Handle error, display appropriate message or fallback behavior
    }
  } else {
    // Handle case where there is no stored quiz info, display appropriate message or fallback behavior
    const testInfoDiv = document.getElementById('testInfo');
    testInfoDiv.innerHTML = `
        <h3>Quiz Information</h3>
        <p><strong>Quiz Code:</strong> ${quizCodeNS}</p>
        <p><strong>Quiz Type:</strong> ${quizType || 'N/A'}</p>
      <p><strong>Quiz Difficulty:</strong> ${quizDifficultyNS || 'N/A'}</p>
        <p><strong>Number of Questions:</strong> ${numberOfQuestionsNS}</p>
        <p><strong>No quiz information found.</strong></p>
      `;
	      	// Update the title tag
document.title = `${quizNameNS}`;
	      const optionsQuizNameDiv = document.getElementById('optionsQuizName');
    optionsQuizNameDiv.innerHTML = `<h1>${quizNameNS}<h1>`;
  }
}

// Check if quizCode matches and retrieve or save quiz info
function checkQuizCodeAndGetInfo(quizCodeNS, quizNameNS, numberOfQuestionsNS, quizImageURL, quizUrl) {
  const savedQuizInfo = localStorage.getItem(`quizInfo_${quizCode}`);
  let quizInfo;
  let startTime = new Date().toLocaleString();

  if (!savedQuizInfo) {
    // Quiz info doesn't exist, save new quiz info to storage
    quizInfo = {
      quizCode: quizCodeNS,
      quizName: quizNameNS,
      quizImageURL: quizImageURL,
      quizType: quizType,
      numberOfQuestions: numberOfQuestionsNS,
      questionsCompleted: questionsCompleted,
      startTime: startTime,
	quizLink: quizUrl  // Add the "q" parameter to the quizInfo object

    };

   // localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(quizInfo));
  } else {
    // Quiz info exists, retrieve existing quiz info from storage
    quizInfo = JSON.parse(savedQuizInfo);
    quizInfo.quizName = quizNameNS ;
    quizInfo.quizImageURL = quizImageURL;
      quizInfo.quizType = quizType || "";
    quizInfo.numberOfQuestions = numberOfQuestionsNS || "";
    quizInfo.startTime = startTime;
quizInfo.quizLink = quizUrl;  // Add the "q" parameter to the quizInfo object
    localStorage.setItem(`quizInfo_${quizCode}`, JSON.stringify(quizInfo));
  }

  return quizInfo;

}
	  
let quizUrl;

function fetchData(q, e) {
 // console.log("fetchDataq:", q + '   e:    ' + e);

  let stringEnt;
  if (e) {
    if (e === "user") {
      console.log("DB JSON structure");
	    window.addEventListener("load", function() {

      const quizRef = firebase.firestore().collection("quizzes").where("quizCodeDB", "==", q);
      quizRef.get().then(function(querySnapshot) {
        if (!querySnapshot.empty) {
          querySnapshot.forEach(function(doc) {
            const quizDataDB = doc.data();
            /// console.log("Quiz Data from DB: ", quizDataDB);
      const parsedQuizDataDB = JSON.parse(quizDataDB.quizDataDB);

            // Use the quizDataDB here
    // Update quizCode, quizName, numberOfQuestions
      quizCode = parsedQuizDataDB.quizCode;
      quizName = parsedQuizDataDB.quizName;
      numberOfQuestions = parsedQuizDataDB.numberOfQuestions || "";
      quizImageURL = parsedQuizDataDB.imageURL;
      quizDifficulty = parsedQuizDataDB.quizDifficulty || "";
      quizCategory = parsedQuizDataDB.quizCategory || "";

    // Parse the quizDataDB.quizDataDB string to a JSON object
	     //         console.log("parsedQuizDataDB Data from DB: ", parsedQuizDataDB);

      // Use the parsedQuizDataDB.questions array to populate questionData
      const questionData = parsedQuizDataDB.questions.map(questionObj => ({
        questionNumber: questionObj.questionNumber,
        question: questionObj.question,
        imageURL: questionObj.imageURL,
        questionType: questionObj.questionType,
        options: questionObj.options,
        answer: questionObj.answer,
        explanation: questionObj.explanation,
        difficulty: questionObj.difficulty
      }));
        //    console.log("questionData from DB: ", questionData);



            // Check quiz code and retrieve or save quiz info
            const quizInfo = checkQuizCodeAndGetInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);

            questions.push(...questionData);
            shuffleArray(questions);

            // Access and use the retrieved quiz information
            const questionsCompleted = quizInfo.questionsCompleted;

            // Display the test information
            displayTestInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);
          });
        } else {
          console.log("No quiz found with quizCodeDB equal to", q);
        }
      }).catch(function(error) {
        console.error("Error getting quiz document: ", error);
      });
      });

    } else {
      console.log("New JSON structure");
      stringEnt = "/q/" + e + "/" + q + ".json";
    }
  } else {
    console.log("Old JSON structure");
    stringEnt = "/q/" + q + ".json";
  }
  console.log("stringEnt URL:", stringEnt);

  quizUrl = stringEnt;
  // Fetch data from URL or database here

    if (e !== "user") {
  fetch(stringEnt)
    .then(response => response.json())
    .then(data => {
      if (Array.isArray(data)) {
        // Handle old JSON structure
        console.log("Old JSON structure");

        if (data.length === 0) {
          // Handle empty data
          console.log("Empty data");
          const randomFile = getRandomFile(files);
          fetchData(randomFile);
        } else {
          // Use the questions data here
          const questionData = data.map(questionObj => ({
            question: questionObj.question,
            answer: questionObj.answer,
            options: questionObj.options,
            difficulty: questionObj.difficulty,
            imageURL: questionObj.imageURL,
            questionType: questionObj.questionType,
            questionNumber: questionObj.questionNumber,
            explanation: questionObj.explanation
          }));

          // Update quizCode, quizName, numberOfQuestions
          quizCode = "";
          quizName = "";
          numberOfQuestions = data.length;
          quizImageURL = "";
          quizDifficulty = "";

          // Check quiz code and retrieve or save quiz info
          const quizInfo = checkQuizCodeAndGetInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty, quizUrl);

          questions.push(...questionData);
          shuffleArray(questions);

          // Access and use the retrieved quiz information
          const questionsCompleted = quizInfo.questionsCompleted;

          // Display the test information
          displayTestInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);
        }
      } else {
        // Handle new JSON structure

        if (data.questions.length === 0) {
          // Handle empty data
          console.log("Empty data");
          const randomFile = getRandomFile(files);
          fetchData(randomFile);
        } else {
          // Use the questions data here
          const questionData = data.questions.map(questionObj => ({
            question: questionObj.question,
            answer: questionObj.answer,
            options: questionObj.options,
            difficulty: questionObj.difficulty,
            imageURL: questionObj.imageURL,
            questionType: questionObj.questionType,
            questionNumber: questionObj.questionNumber,
            explanation: questionObj.explanation
          }));

          // Update quizCode, quizName, numberOfQuestions
          quizCode = data.quizCode;
          quizName = data.quizName;
          numberOfQuestions = data.numberOfQuestions || "";
          quizImageURL = data.quizImageURL;
          quizDifficulty = data.quizDifficulty || "";
          questionNumber = data.questionNumber || "";
          questionType = data.questionType || "";

          // Check quiz code and retrieve or save quiz info
          const quizInfo = checkQuizCodeAndGetInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);

          questions.push(...questionData);
          shuffleArray(questions);

          // Access and use the retrieved quiz information
          const questionsCompleted = quizInfo.questionsCompleted;

          // Display the test information
          displayTestInfo(quizCode, quizName, numberOfQuestions, quizImageURL, quizDifficulty);
        }
      }
        //quizDifficulty = typeof quizDifficulty !== 'undefined' ? quizDifficulty : "";
        let q_link = "/quiz" + q;

        const quizZZ = {
          quizCodeX: quizCode,
          quizNameX: quizName,
          imageURLX: "https://www.quizzatopia.com/images/sq/_.png",
          numberOfQuestionsX: numberOfQuestions,
          quizJsonX: quizUrl,
          quizLinkX: quizLinkURL ? quizLinkURL : q_link, // Use 'q' if quizLinkURL is empty
          quizDifficultyX: quizDifficulty ? quizDifficulty : ""
        };

        console.log("quizZZ:", quizZZ);

        if (e === null || e === "") {} else {
          saveQuizToDB(quizZZ);
        }
     
    })
    .catch(error => console.error(error));
}

	 }
	  
fetchData(q, e);

const reportForm = document.getElementById('reportForm');

	
function submitReport(reportType, xxx){

  const reportDetails = document.getElementById('reportDetails').value;


  if (reportType) {
    // Perform the necessary actions to store the feedback in Firestore

    const feedbackData = {
      feedback: reportDetails,
      feedbackType: reportType,
      date: new Date(),
      quizCode: quizCode // Replace with the actual quiz code
    };
 const db = firebase.firestore();
    // Add the feedback to the 'quizFeedback' collection
    db.collection('quizFeedback').add(feedbackData)
      .then(() => {
  	  
    console.log('Report:', feedback);
    closeReport(); // Close the modal after submitting
    alert('Thank you for your feedback!');
      })
      .catch(error => {
        console.error('Error Reporting Quiz:', error);
        alert('Failed Reporting Quiz. Please try again.');
      });
  



  } else {
	  if (isAnimationEnabled) {
submitReviewBtn.classList.add('shake-animation');
}
  }




	  }




	    
// Function to open the modal
function openReport() {
	  slideIn("reportContainer");

  reportForm.style.display = 'block';
	 console.log("openModal      "); 



}

// Function to close the modal
function closeReport() {
	  slideOut("reportContainer");
  reportForm.style.display = 'none';

}




	
if (  q === null || q === '') {
  console.log("empty.");

  location.reload();
}else{
          console.log("Q:   "+q);
	
}


// Check if animation is enabled in local storage
const storedUserInfo = localStorage.getItem('userInfo');
  animationCheckbox = document.getElementById('animation-quiz');

if (storedUserInfo) {
  const userInfo = JSON.parse(storedUserInfo);
  // Access the animationEnabled property
  isAnimationEnabled = userInfo.animationEnabled;
  // Use the isAnimationEnabled value as needed
	animationCheckbox.checked = isAnimationEnabled;
} else {
  // Handle case when no user info is stored in the local storage
  isAnimationEnabled = false;
	animationCheckbox.checked = isAnimationEnabled;
}

animationCheckbox.addEventListener('change', function() {
  const storedUserInfo = localStorage.getItem('userInfo');
  const userInfo = storedUserInfo ? JSON.parse(storedUserInfo) : {};
  userInfo.animationEnabled = this.checked;
isAnimationEnabled = userInfo.animationEnabled;
  localStorage.setItem('userInfo', JSON.stringify(userInfo));
});
  














	  
    </script>

	  <script src="script.js" defer></script>


 </body>
	
</html>


