<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" /> <!-- Character encoding for the webpage -->
<meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Required for Internet Explorer compatibility -->

<!-- Metadata for search engines -->
<title>Create Quiz | Quizzatopia - Explore a World of Quizzes</title>
<meta name="generator" content="Quizzatopia" /> 
	
<meta name="description" content=" Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation.">

	<meta itemprop="name" content="Quizzatopia">
<meta property="og:title" content="Quizzatopia - Explore a World of Quizzes">
<meta property="og:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="Distribution" content="Global" />
<meta name="Rating" content="General" />
<meta name="copyright" content="Quizzatopia">
<meta name="language" content="English">
<meta name="reply-to" content="quizzatopia@gmail.com">
<meta name="generator" content="Adobe Dreamweaver">
<meta name="Developer" content="Ron Wilson II">
<!-- Links to favicon images for various devices -->
<link rel="icon" sizes="192x192" href="/favicon.ico">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/favicon.ico" type="image/x-icon"/>
<link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Alternate link to favicon image -->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> <!-- Required for mobile devices -->
<meta property="og:type" content="website">

	
<meta property="og:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="keywords" content="quizzing, quizzes, learning, education, fun, trivia, exam preparation, sign up, log in, compete, points, achievements">
<meta property="og:url" content="https://www.quizzatopia.com">

	
<meta name="robots" content="index,follow">
	<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Quizzatopia">
<meta name="twitter:title" content="Quizzatopia - Explore a World of Quizzes">
<meta name="twitter:description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta name="twitter:image" content="https://www.quizzatopia.com/images/logo.png">
<meta name="twitter:url" content="https://www.quizzatopia.com">

<!-- Open Graph metadata for Facebook -->
<meta property="og:site_name" content="Quizzatopia">
<meta property="og:locale" content="en_US">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Schema.org markup for Google+ -->
<meta itemprop="description" content="Welcome to Quizzatopia - the ultimate destination for all your quizzing needs. Discover a world of quizzes like never before, ranging from fun trivia to professional exam preparation. With our user-friendly interface and extensive question bank, learning has never been more enjoyable. Join now to compete with others, earn points, and unlock achievements. Sign up, log in, and embark on your quizzing journey today!">
<meta itemprop="image" content="https://www.quizzatopia.com/images/logo.png">


<!-- Canonical URL -->
<!-- <link rel="canonical" href="https://www.quizzatopia.com/quiz"> -->
 <link rel="canonical" href="https://www.quizzatopia.com/quizzes/create">

	
<!-- Author information -->
<meta name="author" content="Ron Wilson II">
<meta name="contact" content="quizzatopia@gmail.com">

<!-- Page-specific metadata -->
<meta name="subject" content="Quizzatopia Platform">
<meta name="topic" content="Quizzing, Education, Learning, Quizzes">
<meta name="geo.placename" content="Dallas, TX">
<meta name="geo.region" content="US-TX">

<!-- Language and content type -->
<meta name="content-language" content="en-US">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- Caching and expiration -->
<meta http-equiv="expires" content="Tue, 01 Jan 2024 00:00:00 GMT">
<!-- <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="pragma" content="no-cache"> -->
	

 <!-- Google AdSense code -->
 <!--  <script defer  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4968673576211489" crossorigin="anonymous"></script> -->

 <!-- Organization Schema -->
   <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Quizzatopia",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "url": "https://www.quizzatopia.com",
  "logo": "https://www.quizzatopia.com/images/logo.png",
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia/about",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
 </script>



    <!-- Blog Schema -->
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "Quizzatopia Blog",
        "description": "The official blog of Quizzatopia, providing additional quiz-related content and insights.",
        "url": "https://quizzatopia.blogspot.com"
    }
 </script>

  

	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Quizzatopia",
  "url": "https://www.quizzatopia.com",
  "description": "Quizzatopia is an online platform dedicated to providing a diverse range of quizzes for individuals of all ages and backgrounds.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.quizzatopia.com/quiz?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "sameAs": [
    "https://twitter.com/Quizzatopia",
    "https://www.facebook.com/Quizzatopia",
    "https://www.linkedin.com/company/quizzatopia",
    "https://www.reddit.com/r/Quizzatopia",
    "https://www.youtube.com/@Quizzatopia",
    "https://www.tiktok.com/@quizzatopia",
    "https://www.instagram.com/Quizzatopia"
  ]
}
</script>


	  
	  
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.quizzatopia.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Quizzes",
      "item": "https://www.quizzatopia.com/quizzes"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "About",
      "item": "https://www.quizzatopia.com/about"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "Quiz",
      "item": "https://www.quizzatopia.com/quiz"
    }
  ]
}
</script>

	<style>

.mainSection{
display: none;
}
.sectionBTN{
    width: 100%;
    font-weight: 600;
    display: grid;
    padding: 5%;
    font-size: 25px;
	    background-color: #fd7e14;
    color: white;
    border: none;
    text-align: center;
    text-decoration: none;
    cursor: pointer;
    margin-top: 5%;
    border-radius: 2%;
}
#questionList {
    max-width: 500px;
    margin: 5% auto;
}

		#area-1{
			display: block;
		}

			
.custom-file-upload {
    display: block;
    padding: 2% 10%;
    cursor: pointer;
    background-color: #777676;
    border: 1px solid #ccc;
    border-radius: 1vh;
}

.custom-file-upload span {
  font-size: 24px;
  font-weight: bold;
}

/* Hide the default file input */
.custom-file-upload input[type="file"] {
  display: none;
}


		#tagInputContainer {
  display: flex;
  flex-wrap: wrap;
  border: 1px solid #ccc;
  padding: 5px;
  border-radius: 5px;
  min-height: 50px;
}

.tagButton {
  background-color: #fd7e14;
  color: #fff;
  padding: 5px 10px;
  border-radius: 5px;
  margin: 5px;
  cursor: pointer;
}

.tagButton:hover {
  background-color: #fd7e14c7;
}
#tagInput{
    width: 20%;
}
</style>
	  	
	
	
	
  <!-- Chart.js library -->
  <script  src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">

  <!-- Custom CSS -->
 <!--  <link rel="stylesheet" href="/style.css">-->
  <link rel="stylesheet" href="style.css">

	
  <!-- Import navbar and footer components -->
  <link rel="import" href="/elements/navbar.html">
  <link rel="import" href="/elements/footer.html">

  <div id="navbar"></div>
  <!-- Rest of the page content -->
  <div id="signupLoginArea"><div>

  <!-- JavaScript dependencies async -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"  crossorigin="anonymous">


  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js"></script>

  <script  defer src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
	  <script  defer src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js"></script>

  <!-- Firebase SDK -->
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

  <!-- Custom scripts -->
  <script  src="/main.js" defer></script> 
	  </head>
	  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9VG78SV9KZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9VG78SV9KZ');
	  
	//  console.log('page loading??/ mmmmm???????????????????????????????:');
	  
  </script>

  <!-- Google AdSense -->

	
<body>
	<form class="quizForm">

  <div class="mainSection" id="area-1">
<h1>Create Quiz</h1>

	  
  <section>
    <label for="quizName">Quiz Name:</label>
    <input type="text" id="quizName" required>
  </section>

  <section>
    <label for="quizCode">Quiz Code:</label>
    <input type="text" id="quizCode" readonly>
  </section>

  <section>
    <label for="category">Category:</label>
    <select id="category">
      <option value="">Select category...</option>
      <option value="information-tech">Information Technology</option>
      <option value="healthcare">Healthcare</option>
      <option value="education">Education</option>
      <option value="finance">Finance</option>
      <option value="trades">Trades</option>
      <option value="language">Language Proficiency</option>
      <option value="military">Military</option>
      <option value="cooking">Cooking</option>
      <option value="driving">Driving</option>
      <option value="project-management">Project Management</option>
      <option value="architecture">Architecture</option>
      <option value="business">Business</option>
      <option value="marketing">Marketing</option>
      <option value="design">Design</option>
      <option value="real-estate">Real Estate</option>
      <option value="fitness">Fitness</option>
      <option value="school">School</option>
      <option value="movies">Movies</option>
      <option value="gaming">Gaming</option>
      <option value="tv">TV Show</option>
      <option value="music">Music</option>
      <option value="sports">Sports</option>
      <option value="gaming">School</option>
      <option value="random">Random</option>
    </select>
  </section>




  <section>
    <label for="tagInputContainer">Quiz Tags:</label>
<div id="tagInputContainer">
  <div id="tagList">
    <!-- Tag buttons will be dynamically added here -->
  </div>
  <div id="tagInput" contenteditable="true"></div>
</div>
  </section>
	  
  <section>
    <label for="Description">Description:</label>
    <textarea id="description" rows="3" ></textarea>
  </section>
	  
	  
<button class="sectionBTN"  onclick="showSection('area-2')">Add Question</button>
  </div>
</form>
	<form class="quizForm">
	
  <div class="mainSection" id="area-2">
<button class="sectionBTN"  onclick="showSection('area-1')">Quiz Info</button>

  <section>
    <label for="questionType">Question Type:</label>
    <select id="questionType">
      <option value="Multiple Choice">Multiple Choice</option>
      <option value="True/False">True/False</option>
      <option value="Fill in the Blank">Fill in the Blank</option>
    </select>
  </section>

  <section>
    <label for="question">Question:</label>
    <textarea id="question" name="question" rows="3" required></textarea>
  </section>
  <!-- 	
  <section>
<label for="image" class="custom-file-upload">
  <span>Image</span>
<input type="file" id="image" accept="image/jpeg, image/png, image/gif">
</label>
  </section>
	-->
	  
  <section>
    <label for="options">Options:</label>
    <div id="optionsContainer">
      <div class="optionRow">
        <input type="text" class="option"  name="option" required>
        <input type="checkbox" class="correctAnswer">
      </div>
    </div>
<button type="button" id="addOptionButton">Add Option</button>
<button type="button" id="removeOptionButton" style="display: none;">Remove Option</button>
  </section>

  <section>
    <label for="answer">Correct Answer:</label>
    <select id="answer"  name="answer"  required>
      <option value="">Select correct answer...</option>
    </select>
  </section>


  <section>
    <label for="difficulty">Difficulty:</label>
    <select id="difficulty">
      <option value="None">None</option>
      <option value="Easy">Easy</option>
      <option value="Medium" selected>Medium</option>
      <option value="Hard">Hard</option>
    </select>
  </section>

  <section>
    <label for="explanation">Explanation:</label>
    <textarea id="explanation" rows="3"></textarea>
  </section>

  <input type="submit" value="Add Question">
<button class="sectionBTN"  onclick="showSection('area-3')">Ouestions List</button>
  </div>


	</form>
<form class="quizForm">
	  <div class="mainSection" id="area-3">
<button class="sectionBTN" onclick="showSection('area-2')">Add Ouestions</button>
  <section>
  <div id="questionList">
    <h2>Question List:</h2>
  </div>
  </section>

  <section>
  <button class="sectionBTN"  type="button" id="generateJSONButton">Submit</button>
  </section>
  </div>

</form>
	
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>



     const tagInput = document.getElementById('tagInput');
    const tagList = document.getElementById('tagList');
var tagsArray = []; // Make sure this array is defined




//  || event.key === 'Backspace'
	  
    tagInput.addEventListener('keydown', function (event) {
      if (event.key === ' ' || event.key === 'Enter' ) {
        event.preventDefault();
        const tagText = tagInput.innerText.trim();
        if (tagText !== '') {
          addTag(tagText);
          tagInput.innerText = '';
        }
      }
    });

    tagInput.addEventListener('click', function (event) {
      const clickedElement = event.target;
      if (clickedElement === tagInput) {
        tagInput.focus();
      }
    });
	  

tagInput.addEventListener('keydown', function (event) {
  if (event.key === 'Backspace') {
    const lastTagButton = tagList.lastChild;
    if (lastTagButton && lastTagButton.classList.contains('tagButton')) {
      const tagText = lastTagButton.textContent;
      if (tagText.trim() === '') {
        removeTag('', lastTagButton);
      }
    }
  }
});

function addTag(tagText) {
  tagsArray.push(tagText);

  if (tagsArray.length > 5) {
    alert('The maximum number of Tags has been reached.');
    tagsArray.pop(); // Remove the last added tag from tagsArray
    return;
  }

  const tagButton = document.createElement('button');
  tagButton.textContent = tagText;
  tagButton.classList.add('tagButton');
  tagButton.addEventListener('click', () => editTag(tagText, tagButton));
  tagList.appendChild(tagButton);

  updateTagsArray();
}


    function editTag(oldTagText, tagButton) {
      const tagInput = document.createElement('input');
      tagInput.type = 'text';
      tagInput.value = oldTagText;
      tagInput.classList.add('tagInput');
      tagInput.addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
          const updatedTagText = tagInput.value.trim();
          if (updatedTagText !== '') {
            updateTag(oldTagText, updatedTagText, tagButton);
          } else {
            removeTag(oldTagText, tagButton);
          }
        }
      });

      tagButton.textContent = '';
      tagButton.appendChild(tagInput);
      tagInput.focus();
    }

   function updateTag(oldTagText, newTagText, tagButton) {
      const index = tagsArray.indexOf(oldTagText);
      if (index !== -1) {
        tagsArray[index] = newTagText;
        tagButton.textContent = newTagText;
      }
      updateTagsArray();
    }


function removeTag(tagText, tagButton) {
  const index = tagsArray.indexOf(tagText);
  if (index !== -1) {
    tagsArray.splice(index, 1);
    tagButton.remove();
  }
  updateTagsArray();
}

function updateTagsArray() {
  tagsArray = [];
  const tagButtons = tagList.querySelectorAll('.tagButton');
  tagButtons.forEach(button => tagsArray.push(button.textContent.trim()));
}



	  

function showSection(sectionId) {
  // Hide all div elements with the class "mainSection"
	    saveQuizData();

  var mainSections = document.getElementsByClassName('mainSection');
  for (var i = 0; i < mainSections.length; i++) {
    mainSections[i].style.display = 'none';
  }

  // Show the specific section with the given sectionId
  var section = document.getElementById(sectionId);
  if (section) {
    section.style.display = 'block';
  }
}

      // Generate a random quiz code
function generateQuizCode() {
	 const userInfo = getUserInfo();
  let userID = userInfo.firebaseId ;
	
console.log('userID:', userID);

  // Extract the first 2 or 3 characters from the userID
  let shortUserID = userID.substring(0, 3); // Change 3 to 2 if you only want 2 characters

  let quizCode = 'uQuiz' + Math.random().toString(36).substr(2, 5);

  // Concatenate the shortUserID with the generated quiz code
  let finalQuizCode = shortUserID + '_' + quizCode;

  return finalQuizCode;
}
	  
    $(document).ready(function() {



      // Update quiz code field with generated code
      $('#quizCode').val(generateQuizCode());

      // Handle form submission
      $('.quizForm').submit(function(e) {
        e.preventDefault();

        // Get user inputs
  
        var options = [];
        var quizArray = [];

	      
var quizName = input($('#quizName').val());
var quizCode = input($('#quizCode').val());
var category = input($('#category').val());
var description = input($('#description').val());
var quizTags = input($('#quizTags').val());
var questionType = input($('#questionType').val());
var question = input($('#question').val());
	      
var correctAnswer = input($('#answer').val());
var difficulty = input($('#difficulty').val());
var explanation = input($('#explanation').val());
	      
        // Get options and their corresponding correct answers
    $('.optionRow').each(function() {
  var option = $(this).find('.option').val();
	 option =  input(option);
  options.push(option);
});




// Create quiz object
var quizDataString = localStorage.getItem('quizData');
var quizObj = quizDataString ? JSON.parse(quizDataString) : {
  quizName: quizName,
  quizCode: quizCode,
  numberOfQuestions: 0,
  quizCategory: category,
  quizDescription: description,
 // quizTags: tagsArray,
  questions: []
};
//  quizTags: tagsArray,


	  


// Create question object
var questionObj = {
  questionNumber: optionCount, // Update this dynamically when adding multiple questions
  question: question,
  imageURL: "", // Add the image URL here if available
  questionType: questionType,
  options: options,
  answer: correctAnswer,
  explanation: explanation,
  difficulty: difficulty
};
	  	console.log("tagsArray  "+tagsArray)
	console.log("quizTags  "+quizObj.quizTags)    
	console.log("questionObj  "+questionObj[0])    
	console.log("quizObj blank  "+quizObj.questions)    
//console.log()

	      
// Check if the question is blank or empty
if (question.trim() !== '') {

	console.log("questionObj  "+questionObj.question)
  // Save question to quizObj
  quizObj.questions.push(questionObj);
  quizObj.numberOfQuestions = quizObj.questions.length;
}
	console.log("quizObj info  "+quizObj.questions)    

	      
// Save quizObj to local storage
localStorage.setItem('quizData', JSON.stringify(quizObj));

	   

        // Display question in the question list
        var questionListItem = $('<div class="questionListItem"></div>');
        questionListItem.text(questionObj.question);
        $('#questionList').append(questionListItem);

        // Clear form fields
        $('#question').val('');
        $('.optionRow').not(':first').remove();
        $('.option').val('');
        $('.correctAnswer').prop('checked', false);
        $('#answer').val('');
        $('#image').val('');
        $('#explanation').val('');

        // Increment question number
        var questionNumber = parseInt(questionObj.questionNumber);
        questionNumber++;
        questionObj.questionNumber = questionNumber;

   

        // Alert if the maximum number of questions is reached
        if (questionNumber > 5) {
          alert('The maximum number of questions has been reached.');
          $('#quizForm :input[type="submit"]').prop('disabled', true);
        }
      });
	    
var optionCount;

$(document).ready(function() {
  var maxOptions = 4;
	
	
  function updateRemoveOptionButton() {
     optionCount = $('.optionRow').length;
    if (optionCount >= 2) {
      $('#removeOptionButton').show();
    } else {
      $('#removeOptionButton').hide();
    }
  }

  $('#addOptionButton').click(function() {
    var optionCount = $('.optionRow').length;
    if (optionCount < maxOptions) {
      var optionRow = $('<div class="optionRow"></div>');
      optionRow.append('<input type="text" class="option" required>');
      var correctAnswerCheckbox = $('<input type="checkbox" class="correctAnswer">');
      correctAnswerCheckbox.change(function() {
        if ($(this).is(':checked')) {
          $('#answer').val($(this).siblings('.option').val());
        } else {
          $('#answer').val('');
        }
      });
      optionRow.append(correctAnswerCheckbox);
      $('#optionsContainer').append(optionRow);
      updateRemoveOptionButton();
    } else {
      alert('You can add a maximum of ' + maxOptions + ' options.');
    }
  });

  $('#removeOptionButton').click(function() {
    $('.optionRow:last-child').remove();
    updateRemoveOptionButton();
    $('#answer').val('');
  });

  $('#optionsContainer').on('change', '.option', function() {
    var option = $(this).val();
    var correctAnswerSelect = $('#answer');
    correctAnswerSelect.empty();
    correctAnswerSelect.append('<option value="">Select correct answer...</option>');
    $('.option').each(function() {
      var currentOption = $(this).val();
      correctAnswerSelect.append(`<option value="${currentOption}">${currentOption}</option>`);
    });
    if ($(this).siblings('.correctAnswer').is(':checked')) {
      $('#answer').val(option);
    }
  });

  $('#answer').change(function() {
    var selectedAnswer = $(this).val();
    $('.correctAnswer').each(function() {
      var option = $(this).siblings('.option').val();
      if (option === selectedAnswer) {
        $(this).prop('checked', true);
      } else {
        $(this).prop('checked', false);
      }
    });
  });


 $('#questionType').change(function() {
    var questionType = $(this).val();
    if (questionType === 'True/False') {
	    
     $('#addOptionButton').trigger('click');
var optionOne = $('.optionRow input.option').eq(0);
var optionTwo = $('.optionRow input.option').eq(1);
optionOne.val("True");
optionTwo.val("False");
  var optionsContainer = $('#optionsContainer');
  optionsContainer.empty();

    // Add True and False options
    optionsContainer.append('<div class="optionRow">' +
      '<input type="text" class="option" value="True" required>' +
      '<input type="checkbox" class="correctAnswer">' +
      '</div>');
    optionsContainer.append('<div class="optionRow">' +
      '<input type="text" class="option" value="False" required>' +
      '<input type="checkbox" class="correctAnswer">' +
      '</div>');
    }
  });

	
});

//  quiztags: tagsArray,
//  quizDescription: description,

  $('#questionList').on('click', '.questionListItem', function() {
    var questionIndex = $(this).index();
    var questionData = JSON.parse(localStorage.getItem('questions'))[questionIndex];
    clearFormInputs();
    $('#quizName').val(questionData.quizName);
    $('#quizCode').val(questionData.quizCode);
    $('#category').val(questionData.quizCategory);
    $('#description').val(questionData.quizDescription);

$('#questionType').val(questionData.questionType);
    $('#question').val(questionData.question);
    questionData.options.forEach(function(option) {
      if (option !== '') {
        var optionRow = $('<div class="optionRow"></div>');
        var optionInput = $('<input type="text" class="option" required>');
        optionInput.val(option);
        var correctAnswerCheckbox = $('<input type="checkbox" class="correctAnswer">');
        if (option === questionData.answer) {
          correctAnswerCheckbox.prop('checked', true);
          $('#answer').val(option);
        }
        optionRow.append(optionInput, correctAnswerCheckbox);
        $('#optionsContainer').append(optionRow);
      }
    });
    $('#difficulty').val(questionData.difficulty);
    $('#explanation').val(questionData.explanation);
  });

  $('#quizForm').submit(function(event) {
    event.preventDefault();
    // Process the form data and save the question to local storage or database
    // ...
  //  clearFormInputs();
  });
});

	  // $(this).remove();  
        // Remove question
$('#questionList').on('click', '.questionListItem', function() {
  var questionIndex = $(this).index();
  var quizQuestions = JSON.parse(localStorage.getItem('quizQuestions'));
  quizQuestions.splice(questionIndex, 1);
  localStorage.setItem('quizQuestions', JSON.stringify(quizQuestions));
  
  if (quizQuestions.length < 5) {
    $('#quizForm :input[type="submit"]').prop('disabled', false);
  }
});
	  


        // Load questions from local storage
function loadQuestions() {
  var quizData = JSON.parse(localStorage.getItem('quizData'));
  if (quizData) {

    $('#quizName').val(quizData.quizName);
    $('#quizCode').val(quizData.quizCode);
  $('#category').val(quizData.quizCategory);
  $('#description').val(quizData.quizDescription);

	  
  const initialTags = quizData.quizTags;
  initialTags.forEach(tag => {
    addTag(tag);
  });
	  
//var categoryOption = quizData.category;
// Set the select element based on the option name
//$('#category').val(categoryOption);
	
var questionTypeOption = quizData.questionType;
// Set the select element based on the option name
$('#questionType').val(questionTypeOption);
	  

	  
    $('#questionList').empty();
// Make sure quizData is defined and has the questions property before accessing it
if (quizData && quizData.questions) {
  $.each(quizData.questions, function(index, question) {
    var questionListItem = $('<div class="questionListItem"></div>');
    questionListItem.text(question.question);
    $('#questionList').append(questionListItem);
  });

  if (quizData.questions.length >= 5) {
    $('#quizForm :input[type="submit"]').prop('disabled', true);
  }
} else {
  // Handle the case where quizData or quizData.questions is not defined or null
  console.log('quizData or quizData.questions is not defined or null');
}

	
}

	  }

	  
$(document).ready(function() {
  // Load existing quiz data if available
  loadQuestions();

  

  // Add event listener to save the quiz data when the user tries to leave the page or close the tab
  $(window).on('beforeunload', function() {
  //  saveQuizData();
  });
});
  
// Function to save the quiz data to local storage
  function saveQuizData() {
    var quizData = {
      quizName: input($('#quizName').val()),
      quizCode: input($('#quizCode').val()),
      quizCategory: input($('#category').val()),
      quizDescription: input($('#description').val()),
      quizTags: tagsArray, // Implement getTags() to fetch the tags from the input field
      questionType: input($('#questionType').val()),
   //   questions: input(getQuestions()) // Implement getQuestions() to fetch all questions from the form
    };
    localStorage.setItem('quizData', JSON.stringify(quizData));
	      console.log('Saved Quiz   ' );

  }


$(document).ready(function() {
  // Existing code

  $('#generateJSONButton').click(function() {
    var questionsData = localStorage.getItem('quizData');
    if (questionsData) {
	    
// Retrieve quiz data from local storage
var quizData = JSON.parse(localStorage.getItem('quizData'));

// Convert quiz data to JSON format
var jsonData = JSON.stringify(quizData, null, 2);

console.log("quizData   "+quizData.quizCode);
	    
      // You can do further processing with the generated JSON, such as sending it to a server or displaying it to the user.
const userInfo = getUserInfo();
	

// Assuming you have initialized Firebase and obtained a Firestore database reference
// Replace the following placeholders with your actual values
var quizCodeDB = quizData.quizCode;
var quizNameDS = quizData.quizName;
var categoryDB = quizData.quizCategory; 
var quizLinkDB = "/quiz/?e=user&q=" + quizCodeDB;
var imageURLDB = "https://www.quizzatopia.com/images/sq/_.png";
var numberOfQuestionsDB = quizData.numberOfQuestions;
var quizStartedCount = 0;
var quizDate = new Date().toISOString();
var saveType = "user";
var userID = userInfo.firebaseId || "";
var quizDataDB = jsonData;
var quizTagsDB =  quizData.quizTags;
var quizCreatedByDB =  userInfo.userName;
var quizDescriptionDB =  quizData.quizDescription;

var quizData = {
  quizCodeDB: quizCodeDB,
  quizNameDB: quizNameDS,
  categoryDB: categoryDB,
  quizCreatedByDB: quizCreatedByDB,
  quizDescriptionDB: quizDescriptionDB,
  quizTagsDB: quizTagsDB,
  quizLinkDB: quizLinkDB,
  imageURLDB: imageURLDB,
  numberOfQuestionsDB: numberOfQuestionsDB,
  quizStartedCount: quizStartedCount,
  quizDate: quizDate,
  saveType: saveType,
  userID: userID,
  quizDataDB: quizDataDB
};

// Post the data to the Firestore collection "quizzes"
firebase.firestore()
  .collection("quizzes")
  .add(quizData)
  .then(function(docRef) {
    console.log("Quiz document written with ID: ", docRef.id);
  })
  .catch(function(error) {
    console.error("Error adding quiz document: ", error);
  });


	    
    } else {
      console.log("No questions found in local storage.");
    }
  });
});



	  
	  
    </script>
	  <script src="script.js" defer></script>
 </body>
	
</html>

